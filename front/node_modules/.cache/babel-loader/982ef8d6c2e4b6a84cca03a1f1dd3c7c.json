{"ast":null,"code":"import _slicedToArray from\"/home/narminali/Desktop/vabiss/narmin-oms-front/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from'axios';import React,{useState,useEffect}from'react';import{Link,useNavigate}from'react-router-dom';import{Nav,Navbar,NavItem,NavbarBrand,Row,Col}from'reactstrap';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Home(){var tokenAdmin=localStorage.getItem('tokenAdmin');var _useState=useState([]),_useState2=_slicedToArray(_useState,2),users=_useState2[0],setUsers=_useState2[1];var deleteUser=function deleteUser(id){axios.delete(\"\".concat(process.env.REACT_APP_API_URL,\"api/delete/\").concat(id),{headers:{Authorization:'Bearer 48|KLRu1k2HXCX2RN9CPRlHCBWshR69CU37rtpxa9kG'}}).then(function(res){getUsers();}).catch(function(err){return console.log(err);});};var navigate=useNavigate();var getUsers=function getUsers(){axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"api/index\"),{headers:{Authorization:'Bearer 48|KLRu1k2HXCX2RN9CPRlHCBWshR69CU37rtpxa9kG'}}).then(function(res){if(res.data.users){setUsers(res.data.users);}else{setUsers([]);}}).catch(function(err){return console.log(err);});};var logoutHandler=function logoutHandler(){if(tokenAdmin){localStorage.removeItem('tokenAdmin');}};useEffect(function(){tokenAdmin?getUsers():navigate('/');},[tokenAdmin,navigate]);return/*#__PURE__*/_jsxs(\"div\",{className:\"container home\",children:[/*#__PURE__*/_jsx(Navbar,{color:\"dark\",dark:true,className:\"mb-3\",children:/*#__PURE__*/_jsxs(Row,{className:\"w-100 mx-3\",children:[/*#__PURE__*/_jsx(Col,{lg:9,children:/*#__PURE__*/_jsx(NavbarBrand,{href:\"/home\",className:\"m-3\",children:\" OAS Team\"})}),/*#__PURE__*/_jsx(Col,{lg:3,children:/*#__PURE__*/_jsx(Nav,{children:/*#__PURE__*/_jsxs(NavItem,{children:[/*#__PURE__*/_jsx(Link,{className:\"btn btn-primary m-2\",to:\"/add\",children:\"Add User\"}),/*#__PURE__*/_jsx(Link,{className:\"btn btn-light m-2\",to:\"/\",onClick:logoutHandler,children:\"Log out\"})]})})})]})}),/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped border \",children:[/*#__PURE__*/_jsx(\"thead\",{className:\" bg-dark text-white \",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Id\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Username\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Operations\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map(function(user,index){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"row\",children:user.id}),/*#__PURE__*/_jsx(\"td\",{children:user.name}),/*#__PURE__*/_jsx(\"td\",{children:user.email}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-danger\",onClick:function onClick(){return deleteUser(user.id);},children:\"Delete\"})})]},index);})})]})]});}export default Home;","map":{"version":3,"sources":["/home/narminali/Desktop/vabiss/narmin-oms-front/src/Home.js"],"names":["axios","React","useState","useEffect","Link","useNavigate","Nav","Navbar","NavItem","NavbarBrand","Row","Col","Home","tokenAdmin","localStorage","getItem","users","setUsers","deleteUser","id","delete","process","env","REACT_APP_API_URL","headers","Authorization","then","res","getUsers","catch","err","console","log","navigate","get","data","logoutHandler","removeItem","map","user","index","name","email"],"mappings":"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","sourcesContent":["import axios from 'axios'\nimport React, { useState, useEffect } from 'react'\nimport { Link, useNavigate } from 'react-router-dom'\nimport { Nav, Navbar, NavItem, NavbarBrand, Row, Col } from 'reactstrap'\nfunction Home() {\n\n    const tokenAdmin = localStorage.getItem('tokenAdmin');\n  const [users, setUsers] = useState([])\n\n    const deleteUser = (id) => {\n        axios\n            .delete(`${process.env.REACT_APP_API_URL}api/delete/${id}`, {\n                headers: {\n                    Authorization: 'Bearer 48|KLRu1k2HXCX2RN9CPRlHCBWshR69CU37rtpxa9kG',\n                },\n            })\n            .then((res) => {\n                getUsers()\n            })\n            .catch((err) => console.log(err));\n    }\n\n    const navigate = useNavigate()\n\n  const getUsers = () => {\n    axios\n        .get(`${process.env.REACT_APP_API_URL}api/index`, {\n          headers: {\n            Authorization: 'Bearer 48|KLRu1k2HXCX2RN9CPRlHCBWshR69CU37rtpxa9kG',\n          },\n        })\n        .then((res) => {\n          if (res.data.users) {\n            setUsers(res.data.users)\n          } else {\n            setUsers([])\n          }\n        })\n        .catch((err) => console.log(err))\n  }\n\n    const logoutHandler = () => {\n        if(tokenAdmin){\n            localStorage.removeItem('tokenAdmin');\n        }\n    }\n\n    useEffect(() => {\n        tokenAdmin ? getUsers() : navigate('/')\n    }, [tokenAdmin, navigate])\n  return (\n      <div className=\"container home\">\n        <Navbar color=\"dark\" dark className=\"mb-3\">\n          <Row className=\"w-100 mx-3\">\n            <Col lg={9} >\n              <NavbarBrand href=\"/home\" className=\"m-3\"> OAS Team</NavbarBrand>\n            </Col>\n            <Col lg={3}\n            >\n              <Nav>\n                <NavItem>\n                  <Link className=\"btn btn-primary m-2\" to=\"/add\">\n                    Add User\n                  </Link>\n                    <Link className=\"btn btn-light m-2\"\n                          to=\"/\"\n                          onClick={logoutHandler}>\n                   Log out\n                  </Link>\n                </NavItem>\n              </Nav>\n            </Col>\n          </Row>\n        </Navbar>\n        <table className=\"table table-striped border \">\n          <thead className=\" bg-dark text-white \">\n          <tr>\n            <th scope=\"col\">Id</th>\n            <th scope=\"col\">Username</th>\n            <th scope=\"col\">Email</th>\n            <th scope=\"col\">Operations</th>\n          </tr>\n          </thead>\n          <tbody>\n          {users.map((user, index) => {\n            return (\n                <tr key={index}>\n                  <th scope=\"row\">{user.id}</th>\n                  <td>{user.name}</td>\n                  <td>{user.email}</td>\n                  <td>\n                    <button\n                        type=\"button\"\n                        className=\"btn btn-danger\"\n                        onClick={() => deleteUser(user.id)}>\n                      Delete\n                    </button>\n                  </td>\n                </tr>\n            )\n          })}\n          </tbody>\n        </table>\n      </div>\n  )\n}\nexport default Home"]},"metadata":{},"sourceType":"module"}