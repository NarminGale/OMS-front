{"ast":null,"code":"import _regeneratorRuntime from\"/home/narminali/Desktop/vabiss/narmin-oms-front/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/narminali/Desktop/vabiss/narmin-oms-front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/narminali/Desktop/vabiss/narmin-oms-front/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{React,useEffect,useState}from'react';import image from'../../images/office-2.jpeg';import{useNavigate}from'react-router-dom';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SignIn(){var _useState=useState('password'),_useState2=_slicedToArray(_useState,2),pass=_useState2[0],setPass=_useState2[1];var _useState3=useState('fa fa-eye-slash'),_useState4=_slicedToArray(_useState3,2),eye=_useState4[0],setEye=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),name=_useState6[0],setName=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),password=_useState8[0],setPassword=_useState8[1];var navigate=useNavigate();var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),namePassErr=_useState10[0],setNamePassErr=_useState10[1];// const [passErr, setPassErr] = useState(false)\nvar _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),err=_useState12[0],setErr=_useState12[1];var onClickEye=function onClickEye(){if(pass==='password'){setPass('text');setEye('fa fa-eye');}else{setPass('password');setEye('fa fa-eye-slash');}};var tokenAdmin=localStorage.getItem('tokenAdmin');var tokenUser=localStorage.getItem('tokenUser');useEffect(function(){if(tokenAdmin){navigate('/home');}else if(tokenUser){navigate('/dashboard');}else{navigate('/');}},[tokenAdmin,tokenUser,navigate]);var onSubmitForm=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;_context.next=4;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"api/login\"),{name:name,password:password});case 4:result=_context.sent;if(result.data.status===200){if(result.data.response.user.admin===true){localStorage.setItem(\"tokenAdmin\",JSON.stringify(result.data.response.token));navigate('/home');}else if(result.data.response.user.admin===false){localStorage.setItem(\"tokenUsers\",JSON.stringify(result.data.response.token));navigate('/dashboard');}}_context.next=14;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);setName(name);setPassword('');if(_context.t0.response.status===422){setErr(true);}if(_context.t0.response.status===401){setNamePassErr(true);}case 14:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return function onSubmitForm(_x){return _ref.apply(this,arguments);};}();useEffect(function(){if(namePassErr===true||err===true){var timeId=setTimeout(function(){// After 5 seconds set the show value to false\nif(namePassErr){setNamePassErr(false);}if(err){setErr(false);}},5000);return function(){clearTimeout(timeId);};}},[err,namePassErr]);return/*#__PURE__*/_jsx(\"div\",{className:\"main\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"left-side col-md-6 col-sm-12\",children:/*#__PURE__*/_jsx(\"img\",{src:image,alt:\"background\",className:\"back-image\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"right-side col-md-6 col-sm-12 d-flex flex-column justify-content-center px-5\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Welcome to\",/*#__PURE__*/_jsx(\"span\",{className:\"d-block\",children:\" Office Administration System\"})]}),/*#__PURE__*/_jsx(\"p\",{children:\"We make job life easy for everone\"}),/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger text-center m-3 \".concat(err===true?'d-block':'d-none'),role:\"alert\",children:\"Name or password cannot be empty!\"}),/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger text-center m-3 \".concat(namePassErr===true?'d-block':'d-none'),role:\"alert\",children:\"Name or Password is incorrect!\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"my-3\",onSubmit:onSubmitForm,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"User Name\"}),/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){setName(e.target.value);},type:\"text\",className:\"form-control\",placeholder:\"Username\",\"aria-label\":\"Username\",\"aria-describedby\":\"basic-addon1\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleInputPassword1\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){setPassword(e.target.value);},type:pass,className:\"form-control\",id:\"exampleInputPassword1\",placeholder:\"\\u25CF\\u25CF\\u25CF\\u25CF\\u25CF\\u25CF\"}),/*#__PURE__*/_jsx(\"span\",{className:\"togglePassword\",onClick:onClickEye,children:/*#__PURE__*/_jsx(\"i\",{className:eye})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger float-right\",type:\"submit\",children:\"Login\"})})]})]})]})});}export default SignIn;","map":{"version":3,"sources":["/home/narminali/Desktop/vabiss/narmin-oms-front/src/pages/SignIn/SignIn.js"],"names":["React","useEffect","useState","image","useNavigate","axios","SignIn","pass","setPass","eye","setEye","name","setName","password","setPassword","navigate","namePassErr","setNamePassErr","err","setErr","onClickEye","tokenAdmin","localStorage","getItem","tokenUser","onSubmitForm","e","preventDefault","post","process","env","REACT_APP_API_URL","result","data","status","response","user","admin","setItem","JSON","stringify","token","timeId","setTimeout","clearTimeout","target","value"],"mappings":"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","sourcesContent":["import { React, useEffect, useState } from 'react'\nimport image from '../../images/office-2.jpeg'\nimport { useNavigate } from 'react-router-dom'\nimport axios from 'axios'\n\nfunction SignIn() {\n  const [pass, setPass] = useState('password')\n  const [eye, setEye] = useState('fa fa-eye-slash')\n\n  const [name, setName] = useState('')\n  const [password, setPassword] = useState('')\n  const navigate = useNavigate()\n\n\n  const [namePassErr, setNamePassErr] = useState(false)\n  // const [passErr, setPassErr] = useState(false)\n  const [err, setErr] = useState(false)\n\n\n  const onClickEye = () => {\n    if (pass === 'password') {\n      setPass('text')\n      setEye('fa fa-eye')\n    } else {\n      setPass('password')\n      setEye('fa fa-eye-slash')\n    }\n  }\n\n  const tokenAdmin = localStorage.getItem('tokenAdmin');\n  const tokenUser = localStorage.getItem('tokenUser');\n\n  useEffect(() => {\n    if(tokenAdmin){\n      navigate('/home');\n    }\n    else if(tokenUser){\n      navigate('/dashboard');\n    }\n    else {\n      navigate('/')\n    }\n  },[tokenAdmin,tokenUser, navigate])\n\n  const onSubmitForm = async(e) => {\n    e.preventDefault()\n    try{\n      const result = await axios.post(`${process.env.REACT_APP_API_URL}api/login`,{name, password});\n\n      if(result.data.status === 200){\n        if(result.data.response.user.admin === true){\n          localStorage.setItem(\"tokenAdmin\",JSON.stringify(result.data.response.token));\n          navigate('/home');\n        }\n        else if(result.data.response.user.admin === false){\n          localStorage.setItem(\"tokenUsers\",JSON.stringify(result.data.response.token));\n          navigate('/dashboard')\n        }\n      }\n    }\n    catch(error){\n      setName(name);\n      setPassword('');\n      if(error.response.status === 422){\n        setErr(true)\n      }\n      if(error.response.status === 401){\n        setNamePassErr(true)\n      }\n    }\n  }\n\n  useEffect(() => {\n\n    if (namePassErr === true || err === true) {\n      const timeId = setTimeout(() => {\n        // After 5 seconds set the show value to false\n        if(namePassErr){\n          setNamePassErr(false)\n        }\n        if(err){\n          setErr(false)\n\n        }\n      }, 5000)\n\n      return () => {\n        clearTimeout(timeId)\n      }\n    }\n  }, [err, namePassErr]);\n\n  return (\n      <div className=\"main\">\n        <div className=\"row\">\n          <div className=\"left-side col-md-6 col-sm-12\">\n            <img src={image} alt=\"background\" className=\"back-image\" />\n          </div>\n          <div className=\"right-side col-md-6 col-sm-12 d-flex flex-column justify-content-center px-5\">\n            <h1>\n              Welcome to\n              <span className=\"d-block\"> Office Administration System</span>\n            </h1>\n            <p>We make job life easy for everone</p>\n            <div className={`alert alert-danger text-center m-3 ${err === true ? 'd-block' : 'd-none'}`} role=\"alert\">\n              Name or password cannot be empty!\n            </div>\n            <div className={`alert alert-danger text-center m-3 ${namePassErr === true ? 'd-block' : 'd-none'}`} role=\"alert\">\n              Name or Password is incorrect!\n            </div>\n            <form className=\"my-3\" onSubmit={onSubmitForm}>\n              <div className=\"form-group mb-3\">\n                <label>User Name</label>\n                <input\n                    onChange={(e) => {\n                      setName(e.target.value)\n                    }}\n                    type=\"text\"\n                    className=\"form-control\"\n                    placeholder=\"Username\"\n                    aria-label=\"Username\"\n                    aria-describedby=\"basic-addon1\"\n                />\n              </div>\n              <div className=\"form-group mb-3\">\n                <label htmlFor=\"exampleInputPassword1\">Password</label>\n                <input\n                    onChange={(e) => {\n                      setPassword(e.target.value)\n                    }}\n                    type={pass}\n                    className=\"form-control\"\n                    id=\"exampleInputPassword1\"\n                    placeholder=\"&#9679;&#9679;&#9679;&#9679;&#9679;&#9679;\"\n                />\n\n                <span className=\"togglePassword\" onClick={onClickEye}>\n                <i className={eye}></i>\n                </span>\n              </div>\n              <div className=\"form-group\">\n                <button className=\"btn btn-danger float-right\"\n                        type=\"submit\">\n                  Login\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n  )\n}\n\nexport default SignIn\n"]},"metadata":{},"sourceType":"module"}